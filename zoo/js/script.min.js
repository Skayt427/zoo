document.addEventListener("DOMContentLoaded",(function(){const e=new Swiper(".partners",{slidesPerView:2,autoplay:{delay:4e3,disableOnInteraction:!1,pauseOnMouseEnter:!0},loop:!0,navigation:{nextEl:".js-partners-next",prevEl:".js-partners-prev"},breakpoints:{1440:{slidesPerView:6,spaceBetween:32},1366:{slidesPerView:5,spaceBetween:32},991:{slidesPerView:4,spaceBetween:16},640:{slidesPerView:3,spaceBetween:16},320:{slidesPerView:2,spaceBetween:16}}});new Swiper(".js-small-slider",{freeMode:!0,slidesPerView:1,breakpoints:{991:{spaceBetween:32,slidesPerView:3},768:{spaceBetween:16,slidesPerView:2.6},560:{spaceBetween:16,slidesPerView:2.2},480:{spaceBetween:16,slidesPerView:1.8},320:{spaceBetween:16,slidesPerView:1.3}},navigation:{nextEl:".js-small-slider-next",prevEl:".js-small-slider-prev"}}),new Swiper(".js-main-slider",{slidesPerView:1,effect:"fade",autoplay:{delay:6e3},navigation:{nextEl:".js-main-next",prevEl:".js-main-prev"}}),new Swiper(".js-animals-slider",{slidesPerView:1,autoplay:{delay:6e3},navigation:{nextEl:".js-animals-next",prevEl:".js-animals-prev"},breakpoints:{768:{spaceBetween:32,slidesPerView:2}}}),new Swiper(".js-bottom-slider",{slidesPerView:1,spaceBetween:16,autoplay:{delay:6e3},navigation:{nextEl:".js-bottom-next",prevEl:".js-bottom-prev"},breakpoints:{768:{spaceBetween:32,slidesPerView:2}}}),new Swiper(".js-custom-slider",{slidesPerView:1,spaceBetween:16,autoplay:{delay:6e3},navigation:{nextEl:".js-custom-next",prevEl:".js-custom-prev"},breakpoints:{991:{spaceBetween:0,slidesPerView:"auto"},768:{slidesPerView:2,spaceBetween:32}}}),new Swiper(".js-page-slider",{slidesPerView:1,effect:"fade",autoplay:{delay:6e3},navigation:{nextEl:".js-page-slider-next",prevEl:".js-page-slider-prev"}}),new Swiper(".js-person-slider",{slidesPerView:1,autoplay:{delay:6e3},navigation:{nextEl:".js-person-next",prevEl:".js-person-prev"}}),new Swiper(".js-advertisement-slider",{slidesPerView:1,autoHeight:!0,autoplay:{delay:6e3},spaceBetween:4,navigation:{nextEl:".js-advertisement-next",prevEl:".js-advertisement-prev"}}),new Swiper(".js-calendar-slider",{slidesPerView:1,spaceBetween:60,watchSlidesProgress:!0,navigation:{nextEl:".js-calendar-next",prevEl:".js-calendar-prev"},breakpoints:{767:{slidesPerView:2,spaceBetween:140}}});const t=document.querySelector(".js-calendar-trigger");t&&t.addEventListener("click",(function(){this.closest(".calendar-dropdown").classList.toggle("active")}));const s=new Swiper(".js-news-slider",{init:!1,freeMode:!0,slidesPerView:1,breakpoints:{991:{spaceBetween:16,slidesPerView:3},768:{spaceBetween:16,slidesPerView:2.6},560:{spaceBetween:16,slidesPerView:2.2},480:{spaceBetween:16,slidesPerView:1.8},320:{spaceBetween:16,slidesPerView:1.3}}}),i=new Swiper(".js-slider-desc",{slidesPerView:1,allowTouchMove:!1,navigation:{nextEl:".js-content-tabs-next",prevEl:".js-content-tabs-prev"},breakpoints:{991:{allowTouchMove:!0}}});if(document.querySelector(".swiper")){function n(e){if("object"==typeof e){let t=e.querySelector(".swiper-slide-active");if(t||(t=e.querySelector(".swiper-slide")),t){let s=t.querySelector(".adaptive-item"),i=e.querySelector(".content-tabs__pagination");i.style.top=s.clientHeight-i.clientHeight+"px",i.style.opacity="1"}}}Array.isArray(i)?i.forEach(e=>{setTimeout(n,1e3,e.el),e.on("slideChangeTransitionEnd",(function(){n(e.el)}))}):(setTimeout(n,1e3,i.el),i.on("slideChangeTransitionEnd",(function(){n(i.el)})))}let l=document.querySelector(".lang"),r=document.querySelector(".lang__drop");if(document.addEventListener("click",(function(e){e.composedPath().includes(l)||(r.style.height="0px",l.classList.remove("active"),r.classList.remove("active"))})),document.querySelectorAll(".modal").length){function a(e){let t=e.querySelector(".modal__container");if(window.innerHeight>=t.clientHeight){let e=(window.innerHeight-t.clientHeight)/2;t.style.top=e+"px"}let s=document.querySelector(".header-search");s.hasAttribute("style")?s.removeAttribute("style"):s.style.display="none"}MicroModal.init({onShow:e=>a(e),onClose:e=>a(e),disableScroll:!0}),document.querySelector("#workingTime")&&setTimeout((function(){MicroModal.show("workingTime",{disableScroll:!0,onShow:e=>a(e),onClose:e=>a(e)}),document.querySelector("#workingTime").querySelector(".modal__overlay").scrollTo(0,0)}),5e3)}let o=new Date;function c(e,t){return String(e).padStart(t,"0")}let d=document.querySelector(".calendar");if(d){let e=d.dataset.dates;if(e)try{e=e.split(","),e=e.map(e=>e.trim())}catch(e){console.log(e)}let t=d.dataset.holidays;if(t)try{t=t.split(","),t=t.map(e=>e.trim())}catch(e){console.log(e)}new VanillaCalendar(d,{type:"default",settings:{lang:"ru",range:{min:o.getFullYear()+"-"+c(o.getMonth()+1,2)+"-"+c(o.getDate(),2)},selection:{day:"multiple"},selected:{month:o.getMonth(),dates:e,holidays:t},visibility:{weekNumbers:!1,today:!0,templateHeader:'\n          %M \n          <svg>\n            <use xlink:href="img/sprite.svg#chevron_down"></use>\n          </svg>'}},actions:{clickDay(e,t){alert(t)},clickMonth(e,t){}}}).init()}const u=document.querySelector(".js-calendar-form");let p=document.querySelectorAll(".js-calendar"),m=[];if(p.length){u.addEventListener("change",(function(t){const s=u.querySelector("[name=week]"),i=u.querySelector("[name=weekend]");if(s&&i){const t=new Date,n=t.getDate()-(t.getDay()-1),l=n+6,r=new Date(t.setDate(n)),a=(new Date(t.setDate(n+5)),new Date(t.setDate(l)));m.forEach((function(t){const n=t.HTMLElement;if(n){let l=n.dataset.holidays;if(l)try{l=l.split(","),l=l.map(e=>new Date(e.trim()));const o=s.checked;if(i.checked&&!o){if(l=t.HTMLElement.dataset.holidays,!l)return!1;l=l.split(","),l=l.map(e=>new Date(e.trim())),l=l.filter(e=>6==e.getDay()||0==e.getDay()).map(e=>`${e.getFullYear()}-${c(e.getMonth()+1,2)}-${c(e.getDate(),2)}`)}else{if(o){let t=e.HTMLElement.dataset.holidays;return t=t.split(","),t=t.map(e=>new Date(e.trim())),t=t.filter(e=>(e.setHours(0,0,0,0),r.setHours(0,0,0,0),a.setHours(0,0,0,0),e>=r&&e<=a)).map(e=>`${e.getFullYear()}-${c(e.getMonth()+1,2)}-${c(e.getDate(),2)}`),Array.isArray(m)&&m.forEach(e=>{e.settings.selected.dates=[],e.update()}),e.settings.selected.dates=t,e.update(),!1}{let e=n.dataset.dates;e&&(e=e.split(","),l=e.map(e=>e.trim()))}}t.settings.selected.dates=l,t.update()}catch(e){console.log(e)}}}))}}));let e=null;p.forEach(t=>{let s=o.getMonth(),i=t.dataset.month,n=o.getFullYear(),l=t.dataset.year;if(l>n||i>=s&&l<=n){let r=t.dataset.dates;if(r)try{r=r.split(","),r=r.map(e=>e.trim())}catch(e){console.log(e)}let a=t.dataset.holidays;if(a)try{a=a.split(","),a=a.map(e=>e.trim())}catch(e){console.log(e)}const d=new VanillaCalendar(t,{settings:{lang:"ru",selection:{year:!1,month:!1,time:!1,day:"multiple"},range:{min:o.getFullYear()+"-"+c(o.getMonth()+1,2)+"-"+c(o.getDate(),2)},selected:{year:o.getFullYear(),month:parseInt(i),dates:r,holidays:a},visibility:{today:!0}},actions:{clickDay(e,t){alert(t)}}});d.init(),m.push(d),n==l&&s==i&&(e=d)}else t.closest(".swiper-slide").remove()})}let w=0;window.addEventListener("scroll",(function(){let e=window.scrollY,t=document.querySelector(".header"),s=document.querySelector(".js-header-index");e>=100&&e>w?(t.classList.add("out"),g.value="",v(),y.classList.remove("active")):t.classList.remove("out"),s&&(e>=100?s.classList.remove("header-index"):s.classList.add("header-index")),window.innerWidth>=1040&&(e>=100?t.classList.add("scrolled"):t.classList.remove("scrolled")),w=e,r.style.height="0px",l.classList.remove("active"),r.classList.remove("active")}));let y=document.querySelector(".header-search"),h=document.querySelector(".header__btn-search"),g=document.querySelector(".header-search__input");if(h){function v(){""!=g.value?y.classList.add("active-results"):y.classList.remove("active-results")}h.addEventListener("click",()=>{y.classList.add("active")}),document.addEventListener("click",(function(e){let t=e.composedPath().includes(h);e.composedPath().includes(y)||t||y.classList.remove("active")})),g.addEventListener("input",v)}if(document.querySelector(".player")){Plyr.setup(".player",{clickToPlay:!0,youtube:{rel:0,showinfo:0,modestbranding:1,iv_load_policy:3}}).forEach(e=>{e.on("seeking",(function(){e.play()})),e.on("play",(function(){this.closest(".swiper")&&this.closest(".swiper").querySelector(".btn-circle__wrapper").classList.add("display-none")})),e.on("pause",(function(){this.closest(".swiper")&&this.closest(".swiper").querySelector(".btn-circle__wrapper").classList.remove("display-none")}))})}if(document.querySelector(".js-player-audio")){Plyr.setup(".js-player-audio",{clickToPlay:!0}).forEach(e=>{e.on("seeking",(function(){e.play()}))})}document.querySelector(".filter__select")&&VirtualSelect.init({ele:".filter__select",search:!1,disableSelectAll:!0,hideClearButton:!0,autoSelectFirstOption:!1,optionsCount:5,noOfDisplayValues:1,moreText:"Текст",selectAllText:"Выбрать все",optionsSelectedText:"свойства",optionSelectedText:"свойство",allOptionsSelectedText:"Все свойства"});let f=document.querySelector(".filter__more");f&&f.addEventListener("click",(function(){document.querySelector(".filter__wrapper").classList.toggle("active")}));let S=document.querySelectorAll(".js-tab-btn");function _(){let e=this.closest(".js-toggle-wrapper"),t=e.querySelector(".js-toggle-content");if(t.classList.contains("active"))t.style.height="0px",e.classList.remove("active"),t.addEventListener("transitionend",(function(){t.classList.remove("active")}),{once:!0});else{e.classList.add("active"),t.classList.add("active"),t.style.height="auto";let s=t.clientHeight+"px";t.style.height="0px",setTimeout((function(){t.style.height=s}),0)}}S&&S.forEach(e=>{e.addEventListener("click",(function(){let e=this.getAttribute("data-tab"),t=document.querySelector('.js-tabs-item[data-tab="'+e+'"]');this.closest(".js-tab-btns").querySelector(".js-tab-btn.active").classList.remove("active"),this.classList.add("active"),this.closest(".js-tab-wrapper").querySelector(".js-tabs-item.active").classList.remove("active"),t.classList.add("active");let s=document.querySelectorAll(".js-slider-desc");s.length&&(s.forEach(e=>{e.querySelector(".content-tabs__pagination").style.opacity="0"}),setTimeout(()=>s.forEach(n),100))}))});let q=document.querySelectorAll('input[type="tel"]');q&&new Inputmask("+7(999)999-99-99").mask(q);let L=document.querySelectorAll(".pin__input");L&&L.forEach(e=>{let t=[],s=e.closest(".pin");function i(e,t){0!=t.length?e.querySelector(".pin__attach").style.display="none":e.querySelector(".pin__attach").style.display="block"}function n(e,t){const s=e.querySelector(".submit-files"),i=new DataTransfer;t.forEach(e=>{i.items.add(e)}),s.files=i.files}e.addEventListener("click",e=>{e.target.value=""}),e.addEventListener("change",e=>{let l=e.target.files;Array.from(l).forEach(e=>{t.find(t=>t.name===e.name)||t.push(e)}),function(e,s){let l=s.querySelector(".pin__file-list");l.innerHTML="",i(s,t);for(let a=0;a<e.length;a++){let o=document.createElement("span");o.classList.add("pin__file"),o.innerHTML=e[a].name;let c=document.createElement("button");function r(l){l.preventDefault();let o=this.closest(".pin__file");t=t.filter(t=>t.name!==e[a].name),o.remove(),i(s,t),n(s,t),c.removeEventListener("click",r)}c.setAttribute("type","button"),c.classList.add("pin__file-remove-button"),c.insertAdjacentHTML("beforeend",'\n                    <svg class="pin__file-remove" fill="#91B93A" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" width="20px" height="20px">\n                        <path d="M 9.15625 6.3125 L 6.3125 9.15625 L 22.15625 25 L 6.21875 40.96875 L 9.03125 43.78125 L 25 27.84375 L 40.9375 43.78125 L 43.78125 40.9375 L 27.84375 25 L 43.6875 9.15625 L 40.84375 6.3125 L 25 22.15625 Z"/>\n                    </svg>\n                '),c.addEventListener("click",r),o.append(c),l.append(o)}n(s,t)}(t,s)})});let E=document.querySelector(".js-burger"),j=document.querySelector(".main-menu"),b=document.querySelector(".main-menu__close");E&&(E.addEventListener("click",(function(){j.classList.add("active")})),b.addEventListener("click",(function(){j.classList.remove("active")}))),document.querySelectorAll(".menu__link").forEach(e=>{let t=e.closest(".menu__item").querySelector(".submenu"),s=e.closest(".menu__item").querySelector(".menu__link-arrow");e.addEventListener("click",(function(){t.classList.toggle("active"),s.classList.toggle("active")}))});let k=function(){!function(){let t=document.querySelector(".footer").querySelector(".slider-arrows"),s=document.querySelectorAll(".footer__col-item");window.innerWidth<=1340?e.el.querySelector(".swiper-wrapper").after(t):e.el.before(t);window.innerWidth<=768?s.forEach(e=>{e.classList.add("js-toggle-wrapper"),e.querySelector(".footer__title").classList.add("js-toggle-trigger"),e.querySelector(".footer__drop").classList.add("js-toggle-content")}):s.forEach(e=>{e.classList.remove("js-toggle-wrapper"),e.querySelector(".footer__title").classList.remove("js-toggle-trigger"),e.querySelector(".footer__drop").classList.remove("js-toggle-content"),e.querySelector(".footer__drop").removeAttribute("style")});!function(){let e=document.querySelectorAll(".js-toggle-trigger");e.forEach(e=>{e.removeEventListener("click",_)}),e.forEach(e=>{e.addEventListener("click",_)})}()}(),document.querySelector(".js-about-title-link")&&function(){let e=document.querySelector(".js-about-title-link"),t=e.closest(".about").querySelector(".title"),s=e.closest(".about").querySelector(".about__right");window.innerWidth<=991?s.after(e):t.after(e)}(),document.querySelector(".js-news-slider")&&window.innerWidth<=991&&s.init(),document.querySelector(".back")&&function(){let e=document.querySelector(".back"),t=document.querySelector(".main-content"),s=document.querySelector(".aside__bottom");window.innerWidth<=991?t.after(e):s.append(e)}(),document.querySelector(".js-adaptive-hashtag")&&function(){let e=document.querySelector(".js-adaptive-hashtag"),t=document.querySelector(".aside__top"),s=document.querySelector(".js-adaptive-hashtag-anchor");s&&(window.innerWidth<=991?s.after(e):t.append(e))}(),document.querySelector(".js-adaptive-drop-btn")&&document.querySelectorAll(".js-adaptive-drop-btn").forEach(e=>{let t=e.closest(".dropdown").querySelector(".dropdown__btns"),s=e.closest(".dropdown").querySelector(".dropdown__content");window.innerWidth<=991?s.append(e):t.preppend(e)}),i.length&&(Array.isArray(i)?i.forEach(e=>{n(e.el)}):n(i.el)),document.querySelector(".news__shadow")&&document.querySelectorAll(".news__shadow").forEach(e=>{let t=e.closest(".news__top");window.innerWidth<=768?t.after(e):t.append(e)})};k(),window.addEventListener("resize",k)}));